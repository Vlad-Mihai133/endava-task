2025-08-22 22:20:33.787 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-22 22:20:33.843 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-08-22 22:20:33.851 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-08-22 19:20:33.8480047+00:00');
SELECT changes();
2025-08-22 22:20:33.896 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-08-22 22:20:33.902 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-08-22 22:20:33.905 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-08-22 22:20:33.911 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-22 22:20:33.914 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-08-22 22:20:34.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Owners" AS "o")
2025-08-22 22:20:34.411 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__now_0='?' (DbType = DateTime), @__AddHours_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CarId", "p"."EndDate", "p"."Provider", "p"."StartDate"
FROM "Policies" AS "p"
WHERE "p"."EndDate" <= @__now_0 AND "p"."EndDate" >= @__AddHours_1
2025-08-22 22:20:34.437 +03:00 [INF] Now listening on: https://localhost:61341
2025-08-22 22:20:34.438 +03:00 [INF] Now listening on: http://localhost:61342
2025-08-22 22:20:34.534 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-22 22:20:34.535 +03:00 [INF] Hosting environment: Development
2025-08-22 22:20:34.536 +03:00 [INF] Content root path: C:\Work\Endava\Task\CarInsurance.Api
2025-08-22 22:20:35.670 +03:00 [INF] Request starting HTTP/2 GET https://localhost:61341/ - null null
2025-08-22 22:20:35.862 +03:00 [INF] Request finished HTTP/2 GET https://localhost:61341/ - 404 0 null 204.9915ms
2025-08-22 22:20:35.867 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:61341/, Response status code: 404
2025-08-22 22:20:39.000 +03:00 [INF] Request starting HTTP/2 GET https://localhost:61341/swagger/index.html - null null
2025-08-22 22:20:39.056 +03:00 [INF] Request finished HTTP/2 GET https://localhost:61341/swagger/index.html - 200 null text/html;charset=utf-8 56.4438ms
2025-08-22 22:20:39.124 +03:00 [INF] Request starting HTTP/2 GET https://localhost:61341/_framework/aspnetcore-browser-refresh.js - null null
2025-08-22 22:20:39.124 +03:00 [INF] Request starting HTTP/2 GET https://localhost:61341/_vs/browserLink - null null
2025-08-22 22:20:39.131 +03:00 [INF] Request finished HTTP/2 GET https://localhost:61341/_framework/aspnetcore-browser-refresh.js - 200 13768 application/javascript; charset=utf-8 6.8836ms
2025-08-22 22:20:39.159 +03:00 [INF] Request finished HTTP/2 GET https://localhost:61341/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.5789ms
2025-08-22 22:20:39.221 +03:00 [INF] Request starting HTTP/2 GET https://localhost:61341/swagger/v1/swagger.json - null null
2025-08-22 22:20:39.235 +03:00 [INF] Request finished HTTP/2 GET https://localhost:61341/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.4554ms
2025-08-22 22:20:41.800 +03:00 [INF] Request starting HTTP/2 GET https://localhost:61341/api/cars - null null
2025-08-22 22:20:41.804 +03:00 [INF] Executing endpoint 'CarInsurance.Api.Controllers.CarsController.GetCars (CarInsurance.Api)'
2025-08-22 22:20:41.817 +03:00 [INF] Route matched with {action = "GetCars", controller = "Cars"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarInsurance.Api.Dtos.CarDto]]] GetCars() on controller CarInsurance.Api.Controllers.CarsController (CarInsurance.Api).
2025-08-22 22:20:41.889 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Vin", "c"."Make", "c"."Model", "c"."YearOfManufacture", "c"."OwnerId", "o"."Name", "o"."Email"
FROM "Cars" AS "c"
INNER JOIN "Owners" AS "o" ON "c"."OwnerId" = "o"."Id"
2025-08-22 22:20:41.897 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarInsurance.Api.Dtos.CarDto, CarInsurance.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 22:20:41.908 +03:00 [INF] Executed action CarInsurance.Api.Controllers.CarsController.GetCars (CarInsurance.Api) in 86.5695ms
2025-08-22 22:20:41.909 +03:00 [INF] Executed endpoint 'CarInsurance.Api.Controllers.CarsController.GetCars (CarInsurance.Api)'
2025-08-22 22:20:41.912 +03:00 [INF] Request finished HTTP/2 GET https://localhost:61341/api/cars - 200 null application/json; charset=utf-8 112.9561ms
2025-08-22 22:20:47.194 +03:00 [INF] Request starting HTTP/2 GET https://localhost:61341/api/cars/2/insurance-valid - null null
2025-08-22 22:20:47.196 +03:00 [INF] Executing endpoint 'CarInsurance.Api.Controllers.CarsController.IsInsuranceValid (CarInsurance.Api)'
2025-08-22 22:20:47.206 +03:00 [INF] Route matched with {action = "IsInsuranceValid", controller = "Cars"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarInsurance.Api.Dtos.InsuranceValidityResponse]] IsInsuranceValid(Int64, System.String) on controller CarInsurance.Api.Controllers.CarsController (CarInsurance.Api).
2025-08-22 22:20:47.231 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-08-22 22:20:47.249 +03:00 [INF] Executed action CarInsurance.Api.Controllers.CarsController.IsInsuranceValid (CarInsurance.Api) in 39.7387ms
2025-08-22 22:20:47.251 +03:00 [INF] Executed endpoint 'CarInsurance.Api.Controllers.CarsController.IsInsuranceValid (CarInsurance.Api)'
2025-08-22 22:20:47.252 +03:00 [INF] Request finished HTTP/2 GET https://localhost:61341/api/cars/2/insurance-valid - 400 null application/problem+json; charset=utf-8 58.9932ms
